<html>
    <head>
        <title>Apple Renamer</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js"></script>
        <script src="index.js"></script>
        <link rel="stylesheet" href="index.css">
        <script>
            const fs = require("fs"); 

            Vue.component("test-comp", {
                template: "<div><a>{{up}}</a><br><a>{{down}}</a</div>", 
                props: ["up", "down"]
            });
            function init() {
                vmBody = new Vue({
                    el: "#vueBody", 
                    data: {
                        files: [], 
                        actions: [{
                            type: "filter", 
                            pattern: ".*"
                        }, {
                            type: "replace", 
                            pattern: "(.*)", 
                            replacement: "$1"
                        }], 
                        newAction: {
                            type: 'replace'
                        }
                    }
                })

                fs.readdir("c:/", (error, filenames) => {
                    // vmFiles.files = filenames; 
                    var files = []; 
                    for (var filename of filenames) {
                        var file = {}; 
                        file["dir"] = "c:/"; 
                        file["name"] = filename; 
                        file["checked"] = true; 
                        files.push(file); 
                    }
                    vmBody.files = files; 
                }); 
            }
        </script>
    </head>
    <body onload="init(); ">
        <div id="vueBody" class="main-blocks__container">
            <div id="divFileList" class="main-blocks__block">
                <div class="flxp-rcc at__body">
                    <img class="at__icon" src="img/at.png" />
                    <input type="text" id="txtWorkingDir" class="flxc at__workingdir" value="C:\" />
                </div>
                <div id="divFiles" class="files__body list__container">
                    <div class="files__item list__item" v-for="(file, f) in files">
                        <div class="flxp-rcc">
                            <input type="checkbox" class="files__select"
                                v-bind:checked="file.checked" v-model="file.checked" />
                            <div class="flxc">
                                <span class="files__number">{{f + 1}}: </span>
                                <span class="files__origin-name" v-bind:title="file.dir">{{file.name}}</span><br>
                                <span class="files__modified-name">{{file.name}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="divActionList" class="main-blocks__block">
                <div id="divActions" class="actions__body list__container">
                    <div class="actions-item list__item flxp-rcc" v-for="action in actions">
                        <input type="checkbox" class="files__select" />
                        <div class="flxc">
                            <div v-if="action.type === 'replace'">
                                <span class="action__title">Replace</span><br>
                                <span class="action__replace-pattern">{{action.pattern}}</span><br>
                                <span class="action__replace-replacement">{{action.replacement}}</span>
                            </div>
                            <div v-if="action.type === 'filter'">
                                <span class="action__title">Filter</span><br>
                                <span class="action__filter-pattern">{{action.pattern}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="divNewAction" class="new-action">
                    <div id="divNewActionExpand" class="expand-button">
                        <span>+New Action</span>
                    </div>
                    <div id="divNewActionType" class="flxp-rcc">
                        <select id="slcNewActionType" class="select flxc" v-model="newAction.type">
                            <option value="replace">Replace</option>
                            <option value="filter">Filter</option>
                            <option value="mark">Mark</option>
                        </select>
                    </div>
                    <div v-bind:class="{active: newAction.type === 'replace'}" class="new-action-attributes">
                        <div class="new-action-attributes__body">
                            <img class="new-action-attributes__icon" src="img/replace-find.png" />
                            <div class="new-action-attributes__inputs">
                                <input type="text" id="txtNewActionReplacePattern" class="flxc" />
                                <br>
                                <input type="text" id="txtNewActionReplaceReplacement" class="flxc" />
                            </div>
                        </div>
                    </div>
                    <div id="divNewActionConfirm" class="flxp-rcc">
                        <input type="button" id="btnNewActionConfirm" value="Confirm" 
                            class="button flxc" onclick="addNewAction(); " />
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>